* Implementing SSL
* **How ssl create a secure connection?**

```bash
+---------+                           +---------+
|         | <-------- Step 1 -------- |         |
| Browser |                           | Server  |
|         | -------- Step 2 ------->  |         |
|         | <-------- Step 3 -------- |         |
|         | -------- Step 4 ------->  |         |
+---------+                           +---------+
```

**Step 1 — Browser → Server: ClientHello**

The browser sends:
- Supported TLS versions
- Supported ciphers
- A random number (client_random)

*This starts the handshake*

**Step 2 — Server → Browser: ServerHello + Certificate**
The server responds with:
- Chosen cipher
- A random number (server_random)
- SSL certificate (contains server public key)
- Sometimes additional handshake data (like DH params)
*Browser now tries to verify the certificate using trusted Certificate Authorities (CAs)*

**Step 3 — Browser Creates the Session Key**
A secure "session key" is generated by the browser.
But how it’s shared depends on the key exchange type:
**In older RSA handshake:**
- Client encrypts session key with server’s public key
- Sends it to the server
**In modern TLS (ECDHE – preferred)**
- Browser & server perform a Diffie–Hellman key exchange
- Both sides independently derive the same shared session key
- ***No key is ever transmitted** → more secure & supports perfect forward secrecy*

**Step 4 — Server Confirms Key**
The server:
- Uses its private key to decrypt (RSA method) or
- Completes DH exchange
- Derives the same session key
- Sends a Finished message encrypted using that session key
*This proves the server successfully derived the correct symmetric key*

**Step 5 — Secure Symmetric Encryption Begins**
*Now both sides have:*
* One shared symmetric session key
* Used for fast encryption of all further data

*Why symmetric?*
- Because symmetric encryption is much faster than public-key encryption.


#### Final Corrected Summary (Clean Version)

1. ClientHello: Browser sends cipher list + random number.
2. ServerHello: Server sends certificate + public key + random number.
3. Key Exchange: Browser creates/derives session key (usually via ECDHE).
4. Server Confirms: Server derives the same key and sends encrypted Finished.
5. Encrypted Session: All communication now uses symmetric AES-style encryption.
